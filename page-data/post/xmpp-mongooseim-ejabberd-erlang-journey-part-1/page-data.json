{"componentChunkName":"component---src-templates-blog-post-js","path":"/post/xmpp-mongooseim-ejabberd-erlang-journey-part-1/","result":{"data":{"markdownRemark":{"html":"<h2>Instant Messaging</h2>\n<p>It's a type of real-time text transmission over the internet and if you want detailed description of what it is please look it up <a href=\"https://en.wikipedia.org/wiki/Instant_messaging\">here</a></p>\n<h2>Underlying Basics</h2>\n<p>There are couple of things, we need to understand about real-time technologies:</p>\n<ul>\n<li>The underlying protocol is not HTTP/HTTPS, but raw TCP with TLS which is equivalent to HTTPS per say</li>\n<li>also there is a websocket which has been recently gaining popularity in the recent years</li>\n</ul>\n<p>The afore mentioned protocols heavily rely on keeping the connection to the servers alive until the user\nforcefully disconnects, whereas the HTTP ones are open and close for every request strategy and not suitable\nwhen you want to hit real-time messaging.</p>\n<h2>XMPP - short and sweet</h2>\n<p>Extensible Messaging and Presence Protocol(XMPP) is a protocol which defines how the text transmission should\nhappen over the wire and it is lightweight compared to the traditional HTTP.</p>\n<p>A detailed components of XMPP are <a href=\"https://xmpp.org/about/technology-overview.html\">here</a>.</p>\n<p><strong>Note: It's utmost important to understand what is XMPP and how it works to understand the servers that use XMPP</strong></p>\n<h2>XMPP and Erlang - Why?</h2>\n<p>Erlang as we all know is fault-tolerant, scalable and can be easily decentralized by the right approach. The XMPP can\nbe implemented in any language and already there are plenty of open-source projects using XMPP with other languages.\nThis article will be mainly about erlang based XMPP servers such as Ejabberd and MongooseIM.</p>\n<p>Thanks to the contributors of those projects that made the Chat industry a huge market for many ventures.</p>\n<p>For more XMPP servers, please look <a href=\"https://xmpp.org/software/servers.html\">here</a></p>\n<h2>Getting Started</h2>\n<h4>Installation for Test Drive</h4>\n<ul>\n<li>Clone from git and use make to install either ejabberd or MongooseIM.</li>\n<li>MongooseIM - install file can be downloaded from Erlang Solutions website</li>\n<li>Ejabberd has direct distribution through apt (apt install ejabberd)</li>\n<li>\n<p>docker (Convenient and best approach)</p>\n<pre><code class=\"language-bash\"># For Ejabberd\ndocker run --name ejabberd -d -p 5222:5222 ejabberd/ecs\n# For MongooseIM\ndocker run -d -t -h mongooseim-1 --name mongooseim-1 -p 5222:5222 mongooseim/mongooseim:latest\n</code></pre>\n</li>\n</ul>\n<h4>Trying out our chat server</h4>\n<ul>\n<li>Pick your favourite IM client from this <a href=\"https://xmpp.org/software/clients.html\">page</a>.</li>\n<li>To start chatting, you will need an account registered with our local server. The registration process is known as <strong><a href=\"https://xmpp.org/extensions/xep-0077.html\">In-Band Registration</a></strong>.</li>\n<li>\n<p>For MongooseIM, the registration is done using the following commands\n<code>mongooseimctl register {HOST} {PASSWORD}</code> and  <code>mongooseimctl register_identified {USERNAME} {HOST} {PASSWORD}</code></p>\n<pre><code class=\"language-bash\"># Registering using random username\n$ mongooseimctl register localhost testpassword\nUser 1596-978064-173548-9A7D4C0FBABEEF51@localhost successfully registered\n# Registering using username and password\n$ mongooseimctl register_identified testuser localhost testpassword\nUser testuser@localhost successfully registered\n</code></pre>\n</li>\n</ul>\n<blockquote>\n<p>Now, you might be wondering, why can't the user register directly?\nIndeed, the users can register themselves,</p>\n<ul>\n<li>if the in-band registration is enabled in the server</li>\n<li>It is disabled by default to prevent SPAM</li>\n<li>most services use XMPP as a add-on in their service, which also means the registration has already been carried out</li>\n<li>we don't want to have second-time registration separately</li>\n<li>We can indirectly register the user using our service to communicate with our XMPP server</li>\n</ul>\n<p>We will get in-depth about configuring our XMPP server later in the series of posts</p>\n</blockquote>\n<h4>Gajim - The chosen one</h4>\n<p>I have chosen Gajim as my demo chat client.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 385px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4c2345aae3cb80b3d43290801e840eef/409e6/2020-08-09-gajim.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACOklEQVQ4y5VUuY7TUBR1D6JAAkLGibfg3Sbend3JhMwwoKGkgAIJOgrQ5AcAIRokiqkoEBUtUgokSigRBVR8AS2fgHS4z57FmngmpDi6T373nXPuInNNwUAZjaZOKM61ug5VNSGIJuq8fnR/8k0ZXNVHQTRw+aqO3ZmDP197+PI+QeuaAX4FWSUhcyDJBs5f0DC/7wK/U/z9lsBRDVwhESZ2lkvuJFmTHmzQQzN08OhNhA9vh9h/18PtPT8vvdE4u/Qlhzz1qmWamC9iPP8R4/EiwdPPMV79SnD3WYB6rRD975J5cqDoBuIdC3uLEC++x3j5M8G91x7slAYkrVvygcvaJR0P9j08+Rhg/inA9KGLi+e0nHCtko8TyalmQnNsaLYNUTGOSm0Iazpk2OBVWHaC2ewORqPtYiDN1bvIVZGxMyMUZQst1YWqtyHkItpK0iVCFmXFgaZ7tMzXEUQDtL0OlJZDcCFKJg1OO5WUK18wV7oZIE5G6HQnSNIxxpMdxPEQQTjAbGsXaZqRoH0qKVcmUzWP+rWFISGhh3EyRLc3RUxn5tTzugdCWU7EVyw5V+yelpMxovHkZh43p7cw6G8i9LvIsm0SmiEM+ySSoT+4kYvJsr3s8FCB9Yf1TKIkNlGF+qi2e2gaIUQrpmX3icDK71gOyy1PvrKHbBhFsgtJsiC3+2hFGRSf3BgBidh5TgG7cuLc8R/GRqczhh/0kVK0nQgRlRgFXUIPPpUeRjQcOjtuksfDHpbxDxOdAaRqngWFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Gajim Version\"\n        title=\"Gajim Version\"\n        src=\"/static/4c2345aae3cb80b3d43290801e840eef/409e6/2020-08-09-gajim.png\"\n        srcset=\"/static/4c2345aae3cb80b3d43290801e840eef/5a46d/2020-08-09-gajim.png 300w,\n/static/4c2345aae3cb80b3d43290801e840eef/409e6/2020-08-09-gajim.png 385w\"\n        sizes=\"(max-width: 385px) 100vw, 385px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Login to your accounts using the registered username, host and password <code>(also known as JabberID, which is of the form ({username}@{host}/{resource}))</code></li>\n<li>After logging in, add the other account as contact using <code>right-click on account name > Add Contact > Fill details > Add</code></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 828px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f771042039ec7025cc57bbc9ae3a66a7/8efc2/2020-08-09-add-contact-gajim.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVQ4y3WSyW4TQRiE/RAIFK+z75tnHwcng8Mi4hsKgQgSxAEJKSgWBwISEmGVOHHiyIVH4cmK6raDACeHT3/3dE91/Uvn58FX/HjwBe92F3h7+3jFC8kZv72fv8TZ3QVKp0F3YGKjZ2J31mIxf4ZP+2/wce8VPtw7xef9E1RJgc7r+Qmez57C1CJoig9dCaCNfKgkCipk40241hj9vo3+wKaghXKc4U40xeHWIxxtP8YTctgeIIkadKyohmInGIwcqFoAw0oQUyRKJvCjCkFcy3WSXseYJOIBv0JP9TDkXcVJMSIiWg4dFuUOXK+EovoS3Yj4QwGPuF7OS6nEtM8ZSzQt5J0afjBZ0dBQiE5WTuG4JXQzknhugaqcIc+3EYYNLCuDLbAFucSlE12P4HgVPAoJXIqPFA+dtNqUG4UpaHq4FCxmrB8v8qGAZyHXIoq95FJBfyXIA0XzmUpCtxnCSKRSyRjFjVxbTFejiG7EMl1FDeR/a4JiYzEdlbWzWBuDUTTnHN0I0etb6HJcRJcFYi/SEyJrgn44YWdTuiiRFS3SfAt1s4OK1JObkqK6gbxs2eUpOy46PZUNcC52OGGqGUyOQLBKNQgZSci5EmvXK/gou0sU3cdAtTFcOXSDehn/SdnJ/6TzNz0xzHKgHU5ALEuQx7fQ1ntw7BI2GyhGZr2GFBwMnUugm5Er3Yt5PH74Dd9Pf6Ft7tNdLmfR4RyLYZdjs1SvmE4qa3kR4kw47vYMXNtQcOVqX67FQ/8b+A1ZgpcDTpRjaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Gajim - Add Contact\"\n        title=\"Gajim - Add Contact\"\n        src=\"/static/f771042039ec7025cc57bbc9ae3a66a7/8efc2/2020-08-09-add-contact-gajim.png\"\n        srcset=\"/static/f771042039ec7025cc57bbc9ae3a66a7/5a46d/2020-08-09-add-contact-gajim.png 300w,\n/static/f771042039ec7025cc57bbc9ae3a66a7/0a47e/2020-08-09-add-contact-gajim.png 600w,\n/static/f771042039ec7025cc57bbc9ae3a66a7/8efc2/2020-08-09-add-contact-gajim.png 828w\"\n        sizes=\"(max-width: 828px) 100vw, 828px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Now, the other user user will receive a subscription request, you will need to <code>Authorize</code> it to be able to chat with the user</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 911px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c46af76a9086fdf6bcc0331c59b9873a/636c2/2020-08-09-sub-request-gajim.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA9klEQVQY002RWZKDMAxEOcgkYfNuYzZDKpn1/ofqkeyQ5ONVC2y1UFN1YsRB20d0D7j24Yoh3jLaLDidNWHh7EhnG3o5IYYF0W7o5IzzxaBqWk8G4Unb+SfWLcSKQM1MLwZISQNFzHf5OfgJlozbfqRhCpVQE7b9D3G6Y0k/hfUbKykzzV8YxlvWwmc+Z13TL5RZsxlvmA2VnmH9FcbtD161plUOVSaR7llLze82CDWXmA5DzoZ3r2n1uilcGpcvGVdy4ibDOVGTtonqlGvnd0i9lOzfv/DjpLLpOzxA8zrdkM2lLqH3lJ+kmOo2UL4JQr5+Khv+A+XNs5Bzw4SUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Gajim - Subscription Request\"\n        title=\"Gajim - Subscription Request\"\n        src=\"/static/c46af76a9086fdf6bcc0331c59b9873a/636c2/2020-08-09-sub-request-gajim.png\"\n        srcset=\"/static/c46af76a9086fdf6bcc0331c59b9873a/5a46d/2020-08-09-sub-request-gajim.png 300w,\n/static/c46af76a9086fdf6bcc0331c59b9873a/0a47e/2020-08-09-sub-request-gajim.png 600w,\n/static/c46af76a9086fdf6bcc0331c59b9873a/636c2/2020-08-09-sub-request-gajim.png 911w\"\n        sizes=\"(max-width: 911px) 100vw, 911px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Double click on the username to start chatting and have fun for a while, before we go a bit deep.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 412px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8ddb76b4e15a64afe853128b84f34ab6/9e32a/2020-08-09-chat-gajim.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABdklEQVQoz3WROVLDQBBFdRFbsiVb+75btvC+4gVDseREVBETkXIFQjISjsIduMqnZ1wyRWGCVz0a9fz+3S2ougWl5UBWHIouRMlAXdQJA6ruwXJiGGYCVQvRVFzILQ9K20ed8mp17Q9CuXIRxRmSpI8s73PhRtOEKNrIhgkWV3NMJnvkxYQKkLiVwXELiA2TCxyK/yDIRgcMqWGhJlqQmsypT058chLyKCvsHKCtRWipERduk+OWGhBVPCA8vX/h8fUTaTHH7uIOs8UlXL+LMB4gjM44STZCnA7ghyUC+taM5F+Eh5cP3D+/QTNzdHsz/thychLtwafHHsEiK8IIohK6mXKXpxBYkk0CEc3QptlwV8kAnlfAogXYtAiT5lYVqlpnMEeV0NHhenuLyXSL880NRuMN5ss9xtMderSEXLaRSyayZIjV+hplf0mtD9HpzpDmo19CR0HTzmlzKQ4x45f8TG3pbKvkRKc79o/BXDrknuWcEvwG9sn+1HS4+N8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Gajim - Chatting\"\n        title=\"Gajim - Chatting\"\n        src=\"/static/8ddb76b4e15a64afe853128b84f34ab6/9e32a/2020-08-09-chat-gajim.png\"\n        srcset=\"/static/8ddb76b4e15a64afe853128b84f34ab6/5a46d/2020-08-09-chat-gajim.png 300w,\n/static/8ddb76b4e15a64afe853128b84f34ab6/9e32a/2020-08-09-chat-gajim.png 412w\"\n        sizes=\"(max-width: 412px) 100vw, 412px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4>Why all of this?</h4>\n<p>Gajim has a nice feature for introspection on the communication between the Chat Client and Chat Server.\nTo access it: Click on the <code>Accounts > {Account Name} > Advanced > XML Console</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1189px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c26695224239a0bc6b17f0fa7befbaf/1790f/2020-08-09-xml-console-gajim.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA1klEQVQY0z2QWZKDMBBDfZgQt228gBdCZZu5/6E0aobk45VcaiGq2/RLQrtk1Cl/NV8XJCLSYF2HpbZpwTYVjFM/785csRWRucScaRw0mut15WBFpKl4918mBw2ds0Gq1IOiBX4g+g0h3OCVeYdx+Qc+vRHSi/qCU6WnKvEJSSQ+OH8i0cv0ZqrmA30f7xAWfTCSf2FZYBmw/MgypAUyM8i/StgPXdxAJ/VLR+MmK7WcLMRk4UNhqDCgd5g58Hq7E11552ke5Mbz7GTj+s3q+o1l41g/kz/QNJsAqjYRtgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Gajim - XML Console\"\n        title=\"Gajim - XML Console\"\n        src=\"/static/0c26695224239a0bc6b17f0fa7befbaf/1790f/2020-08-09-xml-console-gajim.png\"\n        srcset=\"/static/0c26695224239a0bc6b17f0fa7befbaf/5a46d/2020-08-09-xml-console-gajim.png 300w,\n/static/0c26695224239a0bc6b17f0fa7befbaf/0a47e/2020-08-09-xml-console-gajim.png 600w,\n/static/0c26695224239a0bc6b17f0fa7befbaf/1790f/2020-08-09-xml-console-gajim.png 1189w\"\n        sizes=\"(max-width: 1189px) 100vw, 1189px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You can see all the nice XML stanzas going in and out!</p>\n<p>Wrapping up the part one with this tip! Stay tuned for more detailed posts about how to configure, deploy or develop a XMPP server.</p>","frontmatter":{"title":"Instant Messaging using erlang and XMPP - Part 1","date":"09 August, 2020"},"excerpt":"Instant Messaging It's a type of real-time text transmission over the internet and if you want detailed description of what it is please…"}},"pageContext":{"slug":"/xmpp-mongooseim-ejabberd-erlang-journey-part-1/","prev":{"fields":{"slug":"/time-based-one-time-password-elixir-phoenix/"},"frontmatter":{"published":true}},"next":{"fields":{"slug":"/xmpp-mongooseim-ejabberd-erlang-journey-part-2/"},"frontmatter":{"published":false}}}},"staticQueryHashes":["63159454"]}