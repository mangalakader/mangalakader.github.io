<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#" lang="en">
    <head itemscope itemtype="https://mangalakader.github.io">
        <meta name="google-site-verification" content="zbY1XBwjYLe6aeNN808FhPJMrqimMq1LEG2wU8Kot5w" />
<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />
<title itemprop="name">Mangala Kader | Compile VIM from source for MacOS Monterey 12 or MacOS Ventura 13</title>
<meta property="og:title" content="Compile VIM from source for MacOS Monterey 12 or MacOS Ventura 13" />
<meta itemprop="name" content="Compile VIM from source for MacOS Monterey 12 or MacOS Ventura 13" />
<meta name="application-name" content="Compile VIM from source for MacOS Monterey 12 or MacOS Ventura 13" />
<meta property="og:site_name" content="Online Portfolio" />



<meta itemprop="image" content="https://source.unsplash.com/600x900?technology-772" />
<meta property="og:image" content="https://source.unsplash.com/600x900?technology-772" />

<base href="https://mangalakader.github.io/post/source-compile-vim-macos-monterey-12-or-ventura-13/">
<link rel="canonical" href="https://mangalakader.github.io/post/source-compile-vim-macos-monterey-12-or-ventura-13/" itemprop="url" />
<meta name="url" content="https://mangalakader.github.io/post/source-compile-vim-macos-monterey-12-or-ventura-13/" />
<meta property="og:url" content="https://mangalakader.github.io/post/source-compile-vim-macos-monterey-12-or-ventura-13/" />
<meta property="og:locale" content="en">
<meta name="language" content="en">
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">

        <meta name="keywords" content="macos-12, macos-13, ventura, monterey, macos, vim" />
        <meta name="description" content="Compiling VIM from source in the new MacOS where python 2 has been deprecated in favor of python3" />
        <meta itemprop="description" content="Compiling VIM from source in the new MacOS where python 2 has been deprecated in favor of python3" />
        <meta property="og:description" content="Compiling VIM from source in the new MacOS where python 2 has been deprecated in favor of python3" />
    </head>
    <body>
        <div class="progress-container fixed-top">
            <span class="progress-bar"></span>
        </div>
        <nav class="slide-in-blurred-top navbar navbar-expand-lg navbar-light bg-transparent fixed-top">
  <div class="container-fluid px-0">
    <a class="navbar-brand logo text-focus-in ms-3 mt-3" href="/">PMK</a>
    <button class="bg-warning rounded-start border-0 mt-1" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><i class="bi bi-chevron-double-left"></i>&nbsp;&nbsp;Menu</button>
  </div>

  <div class="offcanvas offcanvas-end bg-warning bg-warning-gradient" tabindex="-1" data-bs-scroll="true" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasRightLabel" class="fw-bold">Menu</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="container-fluid p-0">
        <ul class="list-group list-group-flush">
          <a href="/"><li class="list-group-item">Home</li></a>
          <a href="/blog"><li class="list-group-item">Blog</li></a>
          <a href="/tags"><li class="list-group-item">Tags</li></a>
          <a href="/index.xml"><li class="list-group-item">RSS</li></a>
        </ul>
      </div>
    </div>
  </div>
</nav>

        <div id="title" class="container-fluid bg-warning bg-warning-gradient p-5">
            <h2 class="text-dark text-center p-3 p-lg-5">Compile VIM from source for MacOS Monterey 12 or MacOS Ventura 13</h2>
            <h5 class="text-dark text-center">Nov 22, 2022</h5>
        </div>
        <div id="content" class="text-white container-fluid bg-dark bg-dark-gradient p-5 post-container">
            <h3 id="introduction">Introduction</h3>
<p>Starting MacOS 12, python2 has been deprecated from the system applications and VIM requires python2 or python3 support for some of the plugins to work properly, like ultisnips, etc., When I tried to compile VIM from source, python3 from the system applications wouldn&rsquo;t get compiled along with it for some
reason.</p>
<p>The easiest solution would be install python3 using homebrew and compile VIM with it, but you have to make this the default
python for the whole system or atleast configure it in VIM using vimrc, which didn&rsquo;t sit well with me, so I decided to do my
own research and came across a solution to compile VIM with system default python3 but it requires a bit of patience and editing
skills.</p>
<h3 id="finding-the-xcode-installs-directory">Finding the xcode-installs directory:</h3>
<p>Fire up the terminal and type <code>xcode-select -p</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>% xcode-select -p
</span></span><span style="display:flex;"><span>/Library/Developer/CommandLineTools
</span></span></code></pre></div><h3 id="python3-config-files-path">Python3 Config files path</h3>
<p>In the terminal</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">%</span> python
</span></span><span style="display:flex;"><span>Python <span style="color:#ae81ff">3.9.6</span> (default, Aug  <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">2022</span>, <span style="color:#ae81ff">15</span>:<span style="color:#ae81ff">21</span>:<span style="color:#ae81ff">02</span>)
</span></span><span style="display:flex;"><span>[Clang <span style="color:#ae81ff">14.0.0</span> (clang<span style="color:#f92672">-</span><span style="color:#ae81ff">1400.0.29.102</span>)] on darwin
</span></span><span style="display:flex;"><span>Type <span style="color:#e6db74">&#34;help&#34;</span>, <span style="color:#e6db74">&#34;copyright&#34;</span>, <span style="color:#e6db74">&#34;credits&#34;</span> <span style="color:#f92672">or</span> <span style="color:#e6db74">&#34;license&#34;</span> <span style="color:#66d9ef">for</span> more information<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> sys<span style="color:#f92672">.</span>path
</span></span><span style="display:flex;"><span>[<span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#e6db74">&#39;/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip&#39;</span>, <span style="color:#e6db74">&#39;/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9&#39;</span>, <span style="color:#e6db74">&#39;/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload&#39;</span>, <span style="color:#e6db74">&#39;/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages&#39;</span>]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>
</span></span></code></pre></div><p>Vim by default looks for a different runtime path for python3 looking in all default folders and fails to link python causing all python based plugins to
not work properly.</p>
<h3 id="compiling-vim">Compiling VIM:</h3>
<ul>
<li>Clone the vim repo</li>
<li>change directory to the vim repo</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e"># here we are copying and pasting the python src path which we found out above</span>
</span></span><span style="display:flex;"><span>./configure --enable-largefile --enable-libsodium --enable-darwin --enable-cscope --enable-autoservername --enable-perlinterp<span style="color:#f92672">=</span>yes --enable-python3interp<span style="color:#f92672">=</span>yes --enable-rubyinterp<span style="color:#f92672">=</span>yes --enable-terminal --with-features<span style="color:#f92672">=</span>huge --with-python3-command<span style="color:#f92672">=</span>/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/bin/python3 --with-python3-config-dir<span style="color:#f92672">=</span>/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/config-3.9-darwin
</span></span></code></pre></div><ul>
<li>Open src/auto/config.mk</li>
<li>Replace this line:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vim" data-lang="vim"><span style="display:flex;"><span><span style="color:#a6e22e">PYTHON3_LIBS</span>    = -<span style="color:#a6e22e">L</span><span style="color:#e6db74">/Library/</span><span style="color:#a6e22e">Developer</span><span style="color:#e6db74">/CommandLineTools/</span><span style="color:#a6e22e">Library</span><span style="color:#e6db74">/Frameworks/</span><span style="color:#a6e22e">Python3</span>.<span style="color:#a6e22e">framework</span><span style="color:#e6db74">/Versions/</span><span style="color:#ae81ff">3</span>.<span style="color:#ae81ff">9</span><span style="color:#e6db74">/lib/</span><span style="color:#a6e22e">python3</span>.<span style="color:#ae81ff">9</span>/<span style="color:#a6e22e">config</span><span style="color:#ae81ff">-3</span>.<span style="color:#ae81ff">9</span>-<span style="color:#a6e22e">darwin</span> -<span style="color:#a6e22e">lpython3</span>.<span style="color:#ae81ff">9</span> -<span style="color:#a6e22e">ldl</span> -<span style="color:#a6e22e">lSystem</span> -<span style="color:#a6e22e">framework</span> <span style="color:#a6e22e">CoreFoundation</span><span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><ul>
<li>With the below line:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vim" data-lang="vim"><span style="display:flex;"><span># <span style="color:#a6e22e">Here</span> <span style="color:#a6e22e">we</span> <span style="color:#a6e22e">are</span> <span style="color:#a6e22e">adding</span> <span style="color:#a6e22e">runtime</span> <span style="color:#a6e22e">path</span> <span style="color:#a6e22e">for</span> <span style="color:#a6e22e">vim</span> <span style="color:#a6e22e">to</span> <span style="color:#a6e22e">look</span> <span style="color:#a6e22e">into</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">new</span> <span style="color:#a6e22e">xcode</span>-<span style="color:#a6e22e">select</span> <span style="color:#a6e22e">directory</span>, <span style="color:#a6e22e">which</span> <span style="color:#a6e22e">will</span> <span style="color:#a6e22e">show</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">python3</span> <span style="color:#a6e22e">to</span> <span style="color:#a6e22e">vim</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">PYTHON3_LIBS</span>    = -<span style="color:#a6e22e">L</span><span style="color:#e6db74">/Library/</span><span style="color:#a6e22e">Developer</span><span style="color:#e6db74">/CommandLineTools/</span><span style="color:#a6e22e">Library</span><span style="color:#e6db74">/Frameworks/</span><span style="color:#a6e22e">Python3</span>.<span style="color:#a6e22e">framework</span><span style="color:#e6db74">/Versions/</span><span style="color:#ae81ff">3</span>.<span style="color:#ae81ff">9</span><span style="color:#e6db74">/lib/</span><span style="color:#a6e22e">python3</span>.<span style="color:#ae81ff">9</span><span style="color:#e6db74">/config-3.9-darwin -rpath /</span><span style="color:#a6e22e">Library</span><span style="color:#e6db74">/Developer/</span><span style="color:#a6e22e">CommandLineTools</span><span style="color:#e6db74">/Library/</span><span style="color:#a6e22e">Frameworks</span>/ -<span style="color:#a6e22e">lpython3</span>.<span style="color:#ae81ff">9</span> -<span style="color:#a6e22e">ldl</span> -<span style="color:#a6e22e">lSystem</span> -<span style="color:#a6e22e">framework</span> <span style="color:#a6e22e">CoreFoundation</span><span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><ul>
<li>Now make.</li>
<li>Install as usual.</li>
</ul>
<p>Vim will be compiled with MacOS default python3.</p>

            <br />
            <div class="p-3 border-top">
                
                <i class="bi bi-tags-fill"></i>&nbsp;&nbsp;
                
                
                
                <a href="https://mangalakader.github.io/tags/macos-12/" class="tags text-decoration-none text-white">macos-12
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    (1)</a>
                
                
                , 
                
                <a href="https://mangalakader.github.io/tags/macos-13/" class="tags text-decoration-none text-white">macos-13
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    (1)</a>
                
                
                , 
                
                <a href="https://mangalakader.github.io/tags/ventura/" class="tags text-decoration-none text-white">ventura
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    (1)</a>
                
                
                , 
                
                <a href="https://mangalakader.github.io/tags/monterey/" class="tags text-decoration-none text-white">monterey
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    (1)</a>
                
                
                , 
                
                <a href="https://mangalakader.github.io/tags/macos/" class="tags text-decoration-none text-white">macos
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    (1)</a>
                
                
                , 
                
                <a href="https://mangalakader.github.io/tags/vim/" class="tags text-decoration-none text-white">vim
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    (2)</a>
                
                
                
            </div>
        </div>
        <div class="container-fluid justify-content-evenly p-0 row g-0">
            <div class="next-post col-lg btn-secondary p-3 text-center">
                
            </div>

            <div class="previous-post col-lg btn-secondary p-3 text-center">
                
                <a class="link-reverse text-decoration-none text-white" href="https://mangalakader.github.io/post/custom-fortune-cookie-in-your-terminal-shell/?ref=footer">
                    <div class="d-inline-flex flex-row align-items-center">
                        <h5 class="m-0">Custom Fortune Cookie / Random Tips -...&nbsp;&nbsp;</h5>
                        <i class="bi bi-arrow-right-circle-fill fs-2"></i>
                    </div>
                </a>
                
            </div>
        </div>
        <footer class="bg-dark bg-dark-gradient">
    <div class="d-flex justify-content-center py-3 container-fluid text-white">
        <a href="https://github.com/mangalakader" target="_blank" class="text-decoration-none" rel="noreferrer">
            <i class="bi-github text-white px-3 fs-2" role="img" aria-label="GitHub"></i>
        </a>
        <a href="https://www.linkedin.com/in/pmkader" target="_blank" class="text-decoration-none" rel="noreferrer">
            <i class="bi-linkedin text-white px-3 fs-2" role="img" aria-label="LinkedIn"></i>
        </a>
        <a href="/index.xml" target="_blank" class="text-decoration-none" rel="noreferrer">
            <i class="bi-rss-fill text-white px-3 fs-2" role="img" aria-label="RSS"></i>
        </a>
    </div>
    <div class="d-flex justify-content-center pb-5 container-fluid text-white">&copy; 2022, Mangala Kader, All rights reserved.</div>
</footer>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link prefetch="true" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://mangalakader.github.io/css/header.css">

<link rel="stylesheet" href="https://mangalakader.github.io/css/index.css">

<link rel="stylesheet" href="https://mangalakader.github.io/css/footer.css">


<script src="https://mangalakader.github.io/js/index.js" defer></script>


<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:1579889,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

    </body>
</html>
